<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="//demo.productionready.io/main.css" />
  <title>Vite + TS</title>
</head>

<body>
  <nav class="navbar navbar-light">
    <div class="container">
      <a class="navbar-brand" href="/">Blog</a>
      <ul class="nav navbar-nav pull-xs-right">
        <li class="nav-item">
          <!-- Add "active" class when you're on that page" -->
          <a class="nav-link active" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/account/login"> <i class="ion-compose"></i>&nbsp;login </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/account/register"> <i class="ion-gear-a"></i>&nbsp;register </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/post/edit"> <i class="ion-gear-a"></i>&nbsp;New Article </a>
        </li>
        <li class="nav-item" onclick="logout()">
          <a class="nav-link" href="#"> <i class="ion-gear-a"></i>&nbsp;logout </a>
        </li>
      </ul>
    </div>
  </nav>

  <div class="article-page">
  </div>


  <script type="module" src="/src/article.ts"></script>
  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");
    const token = localStorage.getItem("token");
    const deleteArticle = async () => {
      try {
        const response = await fetch(
          `https://v2.api.noroff.dev/blog/posts/${name}/${id}`,
          {
            method: "DELETE",
            headers: {
              "Content-Type": "application/json",
              Authorization: `Bearer ${token}`,
            },
          }
        );
        if (response.status === 204) {
          return window.location.href = "/";
        }
        const result = await response.json();
        alert(result.errors[0].message)
      } catch (error) {
        console.log(error);
      }
    };
  </script>

  <script>
    function logout() {
      localStorage.removeItem("token");
      window.location.href = "/account/login";
    }
  </script>
</body>

</html>